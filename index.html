<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stock Multi-Tab Researcher</title>
    <style>
      /* Reset & Base Styles */
      * {
        box-sizing: border-box;
      }
      body {
        font-family: "Segoe UI", Arial, sans-serif;
        background-color: #eef2f3;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
      }
      .card {
        background: white;
        padding: 30px;
        border-radius: 16px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 450px;
      }
      h2 {
        text-align: center;
        color: #2c3e50;
        margin-bottom: 25px;
      }
      .input-group {
        margin-bottom: 15px;
      }
      label {
        display: block;
        margin-bottom: 6px;
        font-weight: 600;
        font-size: 14px;
        color: #555;
      }
      input[type="text"] {
        width: 100%;
        padding: 14px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: 0.3s;
      }
      input[type="text"]:focus {
        border-color: #3498db;
        outline: none;
      }

      /* Radio Group Styles */
      .radio-group {
        display: flex;
        gap: 15px;
        margin-top: 5px;
        background: #f8f9fa;
        padding: 10px;
        border-radius: 8px;
      }
      .radio-option {
        display: flex;
        align-items: center;
        font-size: 14px;
        cursor: pointer;
        font-weight: 500;
      }
      .radio-option input {
        margin-right: 6px;
        cursor: pointer;
      }

      .btn-main {
        width: 100%;
        padding: 14px;
        background-color: #3498db;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        margin-top: 15px;
        transition: 0.3s;
      }
      .btn-main:hover {
        background-color: #2980b9;
        transform: translateY(-1px);
      }
      #linkContainer {
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #eee;
        display: none;
      }
      .link-item {
        display: block;
        background: #f8f9fa;
        margin-bottom: 8px;
        padding: 10px;
        text-decoration: none;
        color: #34495e;
        border-radius: 6px;
        font-size: 14px;
        border-left: 4px solid #3498db;
        transition: 0.2s;
      }
      .link-item:hover {
        background: #edf2f7;
        color: #2980b9;
      }
      .hint {
        font-size: 11px;
        color: #888;
        text-align: center;
        margin-top: 15px;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h2>Stock Multi-Tab Researcher</h2>

      <div class="input-group">
        <label>Exchange Code</label>
        <input type="text" id="exchange_code" placeholder="Example: SSE" />
      </div>

      <div class="input-group">
        <label>Ticker Symbol</label>
        <input type="text" id="ticker_symbol" placeholder="Example: 601398" />
      </div>

      <div class="input-group">
        <label>Data Source Support</label>
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="source" value="tradingview" checked />
            TradingView
          </label>
          <label class="radio-option">
            <input type="radio" name="source" value="stockanalysis" /> Stock
            Analysis
          </label>
        </div>
      </div>

      <button class="btn-main" onclick="processSearch()">Open All Tabs</button>

      <div id="linkContainer">
        <label>Manual Links:</label>
        <div id="linkList"></div>
      </div>

      <p id="hintText" class="hint" style="display: none">
        If tabs don't appear, please <b>Allow Pop-ups</b> in your settings.
      </p>
    </div>

    <script>
      const exchangeInput = document.getElementById("exchange_code");
      const tickerInput = document.getElementById("ticker_symbol");
      const radioButtons = document.querySelectorAll('input[name="source"]');

      // Fungsi untuk update placeholder berdasarkan pilihan radio button
      function updatePlaceholders() {
        const selectedSource = document.querySelector(
          'input[name="source"]:checked',
        ).value;

        if (selectedSource === "tradingview") {
          exchangeInput.placeholder = "Example: SSE";
          tickerInput.placeholder = "Example: 601398";
        } else {
          // Placeholder menjadi kecil untuk Stock Analysis
          exchangeInput.placeholder = "Example: sha";
          tickerInput.placeholder = "Example: 601398";
        }
      }

      // Jalankan fungsi saat radio button diklik
      radioButtons.forEach((radio) => {
        radio.addEventListener("change", updatePlaceholders);
      });

      // Support Enter Key
      [tickerInput, exchangeInput].forEach((el) => {
        el.addEventListener("keypress", (e) => {
          if (e.key === "Enter") processSearch();
        });
      });

      function processSearch() {
        // 1. Ambil nilai teks dari input
        let exchange = exchangeInput.value.trim();
        let ticker = tickerInput.value.trim();
        const source = document.querySelector(
          'input[name="source"]:checked',
        ).value;

        if (!exchange || !ticker) {
          alert("Please fill in both fields!");
          return;
        }

        let targets = [];

        if (source === "tradingview") {
          exchange = exchange.toUpperCase();
          ticker = ticker.toUpperCase();

          // Gunakan variabel 'exchange' dan 'ticker', bukan ID elemen
          targets = [
            {
              name: "ðŸ“° Latest News",
              url: `https://www.google.com/search?q=${exchange}:%20${ticker}&tbm=nws`,
            },
            {
              name: "ðŸ“Š Financial Stats",
              url: `https://www.tradingview.com/symbols/${exchange}-${ticker}/financials-statistics-and-ratios/`,
            },
            {
              name: "ðŸ¢ Overview",
              // url: `https://www.tradingview.com/symbols/${exchange}-${ticker}/`,
              url: `https://translate.google.com/translate?sl=en&tl=id&u=https://www.tradingview.com/symbols/${exchange}-${ticker}/`,
            },
            {
              name: "â³ Historical Data",
              url: `https://translate.google.com/translate?sl=en&tl=id&u=https://www.tradingview.com/symbols/${exchange}-${ticker}/?timeframe=120M`,
            },
            {
              name: "ðŸ“‘ Income Statement",
              url: `https://www.tradingview.com/symbols/${exchange}-${ticker}/financials-income-statement/`,
            },
            {
              name: "âš–ï¸ Balance Sheet",
              url: `https://www.tradingview.com/symbols/${exchange}-${ticker}/financials-balance-sheet/`,
            },
            {
              name: "ðŸ”„ Cash Flow",
              url: `https://www.tradingview.com/symbols/${exchange}-${ticker}/financials-cash-flow/`,
            },
            {
              name: "ðŸ’° Revenue",
              url: `https://www.tradingview.com/symbols/${exchange}-${ticker}/financials-revenue/`,
            },
            {
              name: "ðŸ’¸ Dividends",
              url: `https://www.tradingview.com/symbols/${exchange}-${ticker}/financials-dividends/`,
            },
          ];
        } else {
          exchange = exchange.toLowerCase();
          ticker = ticker.toLowerCase();

          targets = [
            {
              name: "ðŸ“° Latest News",
              url: `https://www.google.com/search?q=${exchange}:%20${ticker}&tbm=nws`,
            },
            {
              name: "ðŸ“Š Financial Ratios",
              url: `https://www.stockanalysis.com/quote/${exchange}/${ticker}/financials/ratios/?p=quarterly`,
            },
            {
              name: "ðŸ¢ Overview",
              // url: `https://www.stockanalysis.com/quote/${exchange}/${ticker}/company`,
              url: `https://translate.google.com/translate?sl=en&tl=id&u=https://www.stockanalysis.com/quote/${exchange}/${ticker}/company`,
            },
            {
              name: "â³ Historical Data",
              url: `https://www.stockanalysis.com/quote/${exchange}/${ticker}/financials/history/`,
            },
            {
              name: "ðŸ“‘ Income Statement",
              url: `https://www.stockanalysis.com/quote/${exchange}/${ticker}/financials/?p=quarterly`,
            },
            {
              name: "âš–ï¸ Balance Sheet",
              url: `https://www.stockanalysis.com/quote/${exchange}/${ticker}/financials/balance-sheet/?p=quarterly`,
            },
            {
              name: "ðŸ”„ Cash Flow",
              url: `https://www.stockanalysis.com/quote/${exchange}/${ticker}/financials/cash-flow-statement/?p=quarterly`,
            },
            {
              name: "ðŸ’° Revenue",
              url: `https://www.stockanalysis.com/quote/${exchange}/${ticker}/financials/metrics/`,
            },
            {
              name: "ðŸ’¸ Dividends",
              url: `https://www.stockanalysis.com/quote/${exchange}/${ticker}/dividend/`,
            },
          ];
        }

        // Tampilkan link dan buka tab
        document.getElementById("hintText").style.display = "block";
        const container = document.getElementById("linkContainer");
        const list = document.getElementById("linkList");
        list.innerHTML = "";
        container.style.display = "block";

        targets.forEach((item, index) => {
          const a = document.createElement("a");
          a.href = item.url;
          a.target = "_blank";
          a.className = "link-item";
          a.innerText = item.name;
          list.appendChild(a);

          setTimeout(() => {
            window.open(item.url, "_blank");
          }, index * 500);
        });
      }

      // Inisialisasi awal saat halaman dimuat
      updatePlaceholders();
    </script>
  </body>
</html>
